<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="Generator" content="Kate, the KDE Advanced Text Editor" />
<title>parser-test.0rt</title>
</head>
<!-- Highlighting: "Zeolite" -->
<body>
<pre style='color:#1f1c1b;background-color:#ffffff;'>
<b><span style='color:#bf0303;background:#f7e6e6;'>testcase</span></b> <span style='color:#bf0303;'>&quot;parse data from a file&quot;</span> {
  <span style='color:#04e040;'>success</span>
}

<b>unittest</b> <b><span style='color:#0057ae;'>test</span></b> {
  <span style='color:#0057ae;'>TestData</span> data &lt;- <span style='color:#0057ae;'>TestData</span><span style='color:#644a9b;'>.</span>parseFrom(<span style='color:#0057ae;'>Helpers</span><span style='color:#644a9b;'>.</span>loadTestData())<span style='color:#644a9b;'>.</span>getValue()

  <b>if</b> (data<span style='color:#644a9b;'>.</span>getName() != <span style='color:#bf0303;'>&quot;example data&quot;</span>) {
    <b>fail</b>(data<span style='color:#644a9b;'>.</span>getName())
  }

  <b>if</b> (data<span style='color:#644a9b;'>.</span>getDescription() != <span style='color:#bf0303;'>&quot;THIS_IS_A_TOKEN&quot;</span>) {
    <b>fail</b>(data<span style='color:#644a9b;'>.</span>getDescription())
  }

  <b>if</b> (data<span style='color:#644a9b;'>.</span>getBoolean() != <b>false</b>) {
    <b>fail</b>(data<span style='color:#644a9b;'>.</span>getBoolean())
  }
}

<b>concrete</b> <b><span style='color:#0057ae;'>Helpers</span></b> {
  <span style='color:#644a9b;'>@type</span> loadTestData () -&gt; (<i><span style='color:#0057ae;'>String</span></i>)
}

<b>define</b> <b><span style='color:#0057ae;'>Helpers</span></b> {
  loadTestData () {
    <b>scoped</b> {
      <span style='color:#0057ae;'>RawFileReader</span> reader &lt;- <span style='color:#0057ae;'>RawFileReader</span><span style='color:#644a9b;'>.</span>open(<b><i><span style='color:#8060c0;'>$ExprLookup[</span></i></b><i><span style='color:#8060c0;'>MODULE_PATH</span></i><b><i><span style='color:#8060c0;'>]$</span></i></b> + <span style='color:#bf0303;'>&quot;/test-data.txt&quot;</span>)
    } <b>cleanup</b> {
      <span style='color:#006e28;'>\</span> reader<span style='color:#644a9b;'>.</span>freeResource()
    } <b>in</b> <b>return</b> <span style='color:#0057ae;'>TextReader</span><span style='color:#644a9b;'>.</span>readAll(reader)
  }
}
</pre>
</body>
</html>
